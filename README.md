# Bases New Vault From Template

一个简单的 Obsidian 插件，允许你通过自定义模板和指定文件夹位置来创建新文件，替代 Obsidian bases 默认的新建文件行为。

## 📖 简介

Bases New Vault From Template 插件可以拦截 bases 的新建文件操作，让你能够：
- 使用自定义模板创建新文件
- 手动选择要使用的模板
- 指定新文件的创建位置

这个插件特别适合需要频繁使用模板创建标准化文档的用户，比如日记、笔记、项目文档等。

## ✨ 功能特性

### 核心功能

- **模板化创建文件**：使用预定义的模板文件创建新文件，保持文档格式的一致性
- **阻止默认行为**：完全拦截 bases 的新建文件操作，使用自定义逻辑替代
- **智能文件夹选择**：创建文件时可以选择目标文件夹，支持搜索功能
- **模板选择器**：可选的手动模板选择功能，支持从多个模板中选择
- **空白文件支持**：如果模板文件不存在，自动创建空白文件并给出提示

### 高级特性

- **搜索文件夹**：在文件夹选择器中输入关键词快速查找目标文件夹
- **当前文件夹检测**：自动检测当前打开的笔记所在文件夹，作为默认创建位置
- **文件命名**：自动生成带时间戳的文件名，避免文件名冲突

## 🚀 安装

### 从源码安装

1. 克隆或下载此仓库
2. 在项目目录下运行：
   ```bash
   npm install
   ```
3. 运行开发模式：
   ```bash
   npm run dev
   ```
4. 将编译后的文件复制到你的 Obsidian 插件目录：
   - `main.js`
   - `styles.css`
   - `manifest.json`
   
   目标路径：`<你的仓库>/.obsidian/plugins/bases-new-vault-from-template/`

5. 在 Obsidian 中启用插件：**设置 → 社区插件 → 启用插件**

### 从社区插件市场安装（如果已发布）

1. 打开 Obsidian 设置
2. 进入 **社区插件**
3. 搜索 "Bases New Vault From Template"
4. 点击安装并启用

## 📝 使用方法

### 基本使用

1. **配置默认模板**：
   - 打开 **设置 → 插件设置 → Bases New Vault From Template**
   - 在"默认模板文件路径"中输入你的模板文件路径（例如：`Templates/日记模板.md`）

2. **点击新建按钮**：
   - 点击工具栏中的新建按钮（class 为 `bases-toolbar-item bases-toolbar-new-item-menu`）
   - 插件会自动使用配置的模板创建新文件

### 高级使用

#### 启用模板选择器

1. 在插件设置中，启用"手动选择模板"开关
2. 设置"模板文件夹路径"（例如：`Templates`）
3. 点击新建按钮时，会弹出模板选择器
4. 从列表中选择要使用的模板，或选择"空白模板"创建空文件

#### 选择文件夹位置

当启用模板选择器时：
1. 在模板选择器顶部，会显示文件夹选择器
2. 点击文件夹输入框，展开下拉列表
3. 在搜索框中输入文件夹名称进行搜索
4. 选择目标文件夹
5. 选择模板后，新文件将创建在选定的文件夹中

## ⚙️ 配置说明

### 设置选项

| 设置项 | 说明 | 默认值 |
|--------|------|--------|
| **手动选择模板** | 启用后，点击新建按钮时会弹出模板选择器 | 关闭 |
| **模板文件夹路径** | 模板文件所在的文件夹路径 | `Templates` |
| **默认模板文件路径** | 未启用手动选择时使用的默认模板路径 | `Templates/模板.md` |

### 配置示例

**场景 1：使用单一模板**
```
手动选择模板：关闭
默认模板文件路径：Templates/日记模板.md
```

**场景 2：多模板选择**
```
手动选择模板：开启
模板文件夹路径：Templates
默认模板文件路径：Templates/默认模板.md
```

## ⚠️ 注意事项

### 重要提示

1. **按钮类名依赖**：此插件依赖于特定的按钮类名（`bases-toolbar-item bases-toolbar-new-item-menu`）。如果 Obsidian 更新导致类名变化，插件可能无法正常工作。

2. **模板文件路径**：
   - 模板文件路径是相对于仓库根目录的
   - 确保模板文件存在，否则会创建空白文件
   - 路径区分大小写

3. **文件夹选择**：
   - 如果选择的文件夹不存在，创建文件可能会失败
   - 建议在创建前确保目标文件夹存在

4. **文件命名**：
   - 新文件使用时间戳命名：`新文件-YYYY-MM-DD-HH-MM-SS.md`
   - 如果文件名冲突，Obsidian 会自动处理

5. **性能考虑**：
   - 如果仓库中有大量文件夹，加载文件夹列表可能需要一些时间
   - 建议将模板文件集中放在一个文件夹中

### 兼容性

- **Obsidian 版本**：需要 0.15.0 或更高版本
- **平台支持**：支持桌面端和移动端（`isDesktopOnly: false`）

## 🛠️ 开发

### 开发环境设置

1. 确保 Node.js 版本 >= 16
2. 安装依赖：
   ```bash
   npm install
   ```
3. 启动开发模式：
   ```bash
   npm run dev
   ```
4. 修改 `main.ts` 后，会自动编译到 `main.js`

### 项目结构

```
obsidian-sample-plugin/
├── main.ts          # 主插件文件
├── styles.css       # 样式文件
├── manifest.json    # 插件清单
├── package.json     # 项目配置
└── README.md        # 说明文档
```

### 构建生产版本

```bash
npm run build
```

## 🐛 问题反馈

如果遇到问题或有功能建议，请通过以下方式反馈：

- 在 GitHub 仓库中提交 Issue
- 联系作者：Link3750

## 📄 许可证

请查看项目根目录下的 LICENSE 文件。

## 🙏 致谢

- 基于 [Obsidian Sample Plugin](https://github.com/obsidianmd/obsidian-sample-plugin) 开发
- 感谢 Obsidian 团队提供的优秀 API

## 📝 更新日志

### v1.0.0
- 初始版本发布
- 支持模板化创建文件
- 支持手动选择模板
- 支持文件夹选择
- 支持搜索文件夹功能
